<div class="container">

  <%#レビューの詳細%>
  <div class="card offset-1 mt-5" style="max-width: 60rem;">
    <div class="card-body">
      <div class="row mt-3 offset-1">
        <%= link_to user_path(@review.user_id) do %>
          <%= attachment_image_tag @review.user, :profile_image, format: "jpeg", size: "60x60", fallback: "no_image.jpg" %>
          <%= @review.user.name %>
        <% end %>
        <div class="ml-3 mt-3"><%= l @review.updated_at %></div>
      </div>
      <div class="rate<%= @review.id %> mt-2 offset-2" data-score="<%= @review.rate %>"></div>
      <div class="mt-3 col-9 offset-2"><%= @review.text %></div>

      <div class="row mt-3 offset-10">
        <div id="likes_buttons_<%= @review.id %>"><%= render "public/likes/like", review: @review %></div>
        <% if @review.user_id == current_user.id %>
          <%= link_to "編集", edit_item_review_path(@review.item_id, @review.id), class: "fas fa-cog ml-4 mt-1" %>
        <% end %>
      </div>
    </div>
  </div>

  <%#コメント一覧%>
  <div id="comments_area">
    <%= render "public/comments/index", comments: @comments, review: @review %>
  </div>

  <%#コメント投稿フォーム%>
  <%= render "public/comments/form", comment: @comment, review: @review %>

<script>
  $(".rate<%= @review.id %>").empty();
  $(".rate<%= @review.id %>").raty({
    readOnly: true,
    score: function() {
      return $(this).attr('data-score');
    },
    starOff: "<%= asset_path('star-off.png') %>",
    starOn: "<%= asset_path('star-on.png') %>",
    starHalf: "<%= asset_path('star-half.png') %>"
  });
</script>